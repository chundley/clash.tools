<div id="wrapper">
    <div sidebar></div>
    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div top-nav></div>
            <!-- page content -->
            <div class="row content-body" ng-if="!nullState">
                <div class="col-sm-12">
                    <div class="row margin-bottom-huge">
                        <div class="col-sm-12">
                            <h1>{{meta.ign}}</h1>
                            <h3 class="same-line-sub-heading alternate" ng-if="clan.name">{{meta.current_clan.name}}</h3>
                        </div>
                    </div>
                    <div class="row margin-bottom-huge">
                        <div class="col-sm-12 war-summary-container">
                            <div class="widget">
                                <div class="widget-header">War status <span ng-if="war" access-level="coleader" class="pull-right"><a href="/startwar/{{war._id}}" class="btn btn-default btn-xs">Leader edit</a></span></div>
                                <div class="widget-body">
                                    <div class="row" ng-show="!war">
                                        <div class="col-sm-12">
                                            <h3>No war currently active</h3><br/>
                                            <a href="/startwar/new" access-level="coleader" class="btn btn-emphasis btn-sm start-war">Start war</a>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="war">
                                        <div class="col-xs-12">
                                            <div class="row">
                                                <div class="col-xs-12 war-vs"><h2>War vs. <b>{{war.opponent_name}}</b></h2></div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 war-countdown">
                                                <span class="wc-inner">
                                                {{started}} in
                                                <timer interval="1000" autostart="false" language="en" ng-attr-end-time="warStartTime">
                                                <b>{{hours}}</b> hour{{hoursS}}, <b>{{minutes}}</b> minute{{minutesS}}, <b>{{seconds}}</b> second{{secondsS}}</h3>
                                                </timer>
                                                </span>
                                                </div>
                                            </div>
                                            <!-- <div class="row row-underline-2"></div> -->
                                            <div class="row">
                                                <div class="col-xs-12 war-target">
                                                    <div class="target-widget" ng-repeat="target in playerTargets">
                                                        <div class="tw-header text-center">
                                                            Target {{$index + 1}}
                                                        </div>
                                                        <div class="tw-body text-center">
                                                            #{{target.base_num}}
                                                        </div>
                                                        <div class="tw-stars text-center">
                                                            <span class="dropdown" on-toggle="toggled(open)">
                                                                <a href class="dropdown-toggle">
                                                                    <img src="/img/icons/stars.png" ng-if="!target.stars">
                                                                    <img src="/img/icons/stars-0.png" ng-if="target.stars==0">
                                                                    <img src="/img/icons/stars-1.png" ng-if="target.stars==1">
                                                                    <img src="/img/icons/stars-2.png" ng-if="target.stars==2">
                                                                    <img src="/img/icons/stars-3.png" ng-if="target.stars==3">
                                                                </a>
                                                                <ul class="dropdown-menu">
                                                                    <li><a href ng-click="changeStars($index, target.base_num, 0)"><img src="/img/icons/stars-0.png"></a></li>
                                                                    <li><a href ng-click="changeStars($index, target.base_num, 1)"><img src="/img/icons/stars-1.png"></a></li>
                                                                    <li><a href ng-click="changeStars($index, target.base_num, 2)"><img src="/img/icons/stars-2.png"></a></li>
                                                                    <li><a href ng-click="changeStars($index, target.base_num, 3)"><img src="/img/icons/stars-3.png"></a></li>
                                                                </ul>
                                                            </span>                                                               
                                                            
                                                        </div>
                                                        <div class="tw-expire text-center" ng-if="target.stars==null">
                                                            Expires <b>{{target.hours}}</b>:<b>{{target.minutes}}</b>
                                                        </div>
                                                        <div class="tw-expire text-center" ng-if="target.stars!=null">
                                                            Attack done
                                                        </div>                                                        
                                                    </div> 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-xs-12 margin-bottom-huge">
                            <div class="widget">
                                <div class="widget-header">Your status</div>
                                <div class="widget-body">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 xs-12 margin-bottom-huge">
                            <div class="widget">
                                <div class="widget-header">Recent clan activity</div>
                                <div class="widget-body">
                                    <div class="row margin-bottom-medium" ng-repeat="cm in clanMessages">
                                        <div class="col-sm-9 tiny">
                                            <i class="icon-user primary-20" ng-if="cm.type=='member'"></i>
                                            <i class="icon-award primary-20" ng-if="cm.type=='special'"></i>
                                            <i class="icon-star-empty primary-20" ng-if="cm.type=='attack'"></i>
                                            <span ng-bind-html="cm.message">
                                            {{cm.message}}
                                        </span>
                                        </div>
                                        <div class="col-sm-3 tiny text-right">
                                            <span am-time-ago="{{cm.created_at}}"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div> <!-- /page content -->

            <!-- null state -->
            <div class="row content-body" ng-if="nullState">
                <div class="col-sm-12">
                    <div class="row margin-bottom-huge">
                        <div class="col-sm-12">
                            <h1>{{meta.ign}}</h1>
                            <a href="/clans/*" class="same-line-sub-heading-btn btn btn-sm btn-alternate">Join a clan</a>
                            <a href="/clan/new" class="same-line-sub-heading-btn btn btn-sm btn-alternate">Create a clan</a>
                        </div>
                    </div>
                    <div class="row margin-bottom-huge">
                        <div class="col-sm-12 war-summary-container">
                            <div class="widget">
                                <div class="widget-header">Welcome to clash.tools!</div>
                                <div class="widget-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h4>Looks like you're new here. Welcome to clash.tools - the easiest way to manage and track clan wars. <br/><br/>
                                            First, get started by <a href="/profile">completing your profile</a>. Your profile information will be available to clan leaders when you send a join request.<br/><br/>
                                            <b>Clan leaders</b> - if you haven't added your clan to clash.tools yet, add it now by selecting "Create a clan" at the top of this page.</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div> <!-- /null state -->
        </div>
    </div>  <!-- /#page-content-wrapper -->
</div>  <!-- /#wrapper -->
